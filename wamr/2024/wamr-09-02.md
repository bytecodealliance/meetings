# WAMR community Meeting Monthly

**See the [instructions](./README.md) for details on how to attend**

## Agenda

1. Opening, welcome and roll call
2. Announce that the meeting will be recorded and hit record as agreed upon in inaugural meeting.
3. Announcements
    a. _Submit a PR to add your announcement here_
4. Other agenda items
    - Reduce AOT code size when stack trace is enabled

## Attendees

- Jun Xu (Intel)
- Marcin Kolny (Amazon)
- Tianlong Liang (Intel)
- Wenyong Huang (Intel)
- Xin Wang (Intel)
- yamamoto (Midokura/Sony)

## Notes

- Wenyong Huang shared some updates of WAMR:
  - The WAMR-2.1.2 was released and the multi-memory feature was merged to main branch after the releasing
  - The PR of WASI support for file io and socket on Zephyr platform is under review and most of the comments were addressed
  - Intel is adding llama.cpp as a new backend of wasi-nn and successfully ran several LLM models downloaded from huggingface
  - Xiaomi started to implement the shared feature and the first version is mainly to support the interpreter mode
  - Intel open-sourced the wasm2native project: https://github.com/web-devkits/wasm2native, which compiles WebAssembly to native binary and supports two compilation modes: sandbox mode and no-sandbox mode.

- Discussed how to reduce the generated code size in AOT file when stack trace (or dump-call-stack) is enabled (RFC https://github.com/bytecodealliance/wasm-micro-runtime/issues/3758):
  - Basically agree to enable the option 2 which allocates/frees the stack frame at the beginning/returning of a wasm function's AOT code and happens one time so as to reduce the code size in most cases. The current implementation allocates/frees the frame before/after calling a function, since calling a same function may occur in many places, the AOT code of frame allocation/freeing may duplicate many times.
  - To enable option 2, we may use another bit in the feature flag of AOT file, which enables the AOT time to keep the backward compatibility.
  - Basically agree to add option `--dump-call-stack-features=` for wamrc to set which features/fields to store into the stack frame, e.g., "func-idx", "ip", "sp", "locals" and so on. The feature strings are supposed to be simple and short.

- yamamoto asked why Intel decided to make wasm2native an independent project from wamr?
  Wenyong Huang: though wasm2native is ported from wamr project, it is difficult to share the same code base, since it removes the AOT runtime dependency and changes a lot in the AOT compilation process: wamr's aot function's first argument is exec_env and aot function accesses the wasm instance data through exec_env, while wasm2native aot function hasn't this argument and all the instance data is defined/created in the LLVM module (instead of created by AOT runtime). The LLVM IR generated by wasm2native compiler is very different from the LLVM IR generated by wamr's aot compiler.

## Action Items

* [ ] TODO
